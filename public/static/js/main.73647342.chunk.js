(this["webpackJsonpthe-social-chef"]=this["webpackJsonpthe-social-chef"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(21),s=n.n(r),i=n(8),a=(n(28),n(3)),j=n(4),o=(n(29),n(30),n(0));var u=function(e){var t=e.recipe;return void 0!=t?Object(o.jsx)("div",{className:"recipe-card",children:Object(o.jsx)(i.b,{className:"link",to:"/recipes/".concat(t.id),children:Object(o.jsx)("h2",{children:t.name})})}):null};n(32);var l=function(e){var t=e.user;return void 0!=t?Object(o.jsx)("div",{className:"chef-card",children:Object(o.jsx)(i.b,{className:"link",to:"/chefs/".concat(t.id),children:Object(o.jsx)("h2",{children:t.username})})}):null},b=n(44);n(33);var h=function(e){var t=e.currentUser,n=e.recipes,r=e.users,s=Object(c.useState)([]),i=Object(a.a)(s,2),j=i[0],h=i[1],O=Object(c.useState)(""),d=Object(a.a)(O,2),f=d[0],x=d[1],p=Object(c.useState)(""),m=Object(a.a)(p,2),g=m[0],v=m[1];return console.log(n),Object(c.useEffect)((function(){return h(n.filter((function(e){return e.user.id==t.id})))}),[t,n]),Object(c.useEffect)((function(){for(var e=[],t=0;t<4;t++)e.push(n[Math.floor(Math.random()*n.length)]);x(e);for(var c=[],s=0;s<4;s++)c.push(r[Math.floor(Math.random()*r.length)]);v(c)}),[n,r]),""!=t?Object(o.jsxs)("div",{className:"home-container",children:[Object(o.jsx)("h3",{children:"My Recipes"}),Object(o.jsx)("ul",{children:j.map((function(e){return Object(o.jsx)(u,{recipe:e})}))})]}):Object(o.jsxs)(b.a,{children:[Object(o.jsxs)(b.a,{children:[Object(o.jsx)("h1",{children:"The Social Chef!"}),Object(o.jsx)("h3",{children:"Start sharing and exploring recipes by signing up or logging in!"})]}),Object(o.jsxs)(b.a,{children:[Object(o.jsx)("h2",{children:"Check out these recipes!"}),Object(o.jsx)("ul",{children:""!=f?f.map((function(e){return Object(o.jsx)(u,{recipe:e})})):null}),Object(o.jsx)("h2",{children:"Some of the Chefs!"}),Object(o.jsx)("ul",{children:""!=g?g.map((function(e){return Object(o.jsx)(l,{user:e})})):null})]})]})};n(34);var O=function(e){return""!=e.currentUser?Object(o.jsx)("nav",{className:"side-nav",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)(i.b,{className:"sideLink",to:"/",children:"Home"}),Object(o.jsx)(i.b,{className:"sideLink",to:"/recipes",exact:"true",children:"Recipes"}),Object(o.jsx)(i.b,{className:"sideLink",to:"/chefs",exact:"true",children:"Chefs"}),Object(o.jsx)(i.b,{className:"sideLink",to:"/recipes/create",exact:"true",children:"Share Recipe"})]})}):Object(o.jsx)("nav",{className:"side-nav",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)(i.b,{className:"sideLink",to:"/",children:"Home"}),Object(o.jsx)(i.b,{className:"sideLink",to:"/recipes",exact:"true",children:"Recipes"}),Object(o.jsx)(i.b,{className:"sideLink",to:"/chefs",exact:"true",children:"Chefs"})]})})};n(35);var d=function(e){var t=e.currentUser,n=e.setCurrentUser,c=Object(j.f)();return""!==t?Object(o.jsxs)("div",{className:"topbar",children:[Object(o.jsxs)("div",{className:"left",children:[Object(o.jsx)("img",{src:"https://icon-library.com/images/cook-icon/cook-icon-29.jpg",alt:""}),Object(o.jsx)("h3",{children:"The Social Chef"})]}),Object(o.jsx)("div",{className:"right",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)("div",{"data-initials":t.first_name[0]+t.last_name[0]})}),Object(o.jsx)("li",{children:Object(o.jsx)(i.b,{to:"/",onClick:function(e){e.preventDefault(),fetch("/api/logout",{method:"DELETE"}).then(n("")).then(c("/"))},children:"Logout"})}),Object(o.jsxs)("li",{children:[Object(o.jsx)(i.b,{to:"/account",children:"Account"})," "]})]})})]}):Object(o.jsxs)("div",{className:"topbar",children:[Object(o.jsx)(i.b,{className:"link",to:"/login",children:"Login"}),Object(o.jsx)(i.b,{className:"link",to:"/signup",children:"Sign Up"})]})};var f=function(e){var t=e.onLogin,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],i=r[1],u=Object(c.useState)(""),l=Object(a.a)(u,2),b=l[0],h=l[1],O=Object(j.f)();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Login"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:b})}).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),O("/")):e.json().then((function(e){return alert(e.errors)}))}))},children:[Object(o.jsx)("label",{children:"username: "}),Object(o.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)}}),Object(o.jsx)("label",{children:"password: "}),Object(o.jsx)("input",{type:"password",onChange:function(e){return h(e.target.value)}}),Object(o.jsx)("button",{children:"login"})]})]})};n(36),n(37);var x=function(e){var t=e.handleSearch;return Object(o.jsxs)("div",{className:"search",children:[Object(o.jsx)("label",{children:"search"}),Object(o.jsx)("input",{onChange:t,type:"text"})]})};var p=function(e){var t=e.recipes,n=Object(c.useState)(t),r=Object(a.a)(n,2),s=r[0],i=r[1],j=Object(c.useState)(""),l=Object(a.a)(j,2),b=l[0],h=l[1];return Object(c.useEffect)((function(){i(t)}),[t]),Object(c.useEffect)((function(){i(t.filter((function(e){return""===b?e:e.name.toLowerCase().includes(b)})))}),[b]),Object(o.jsxs)("div",{className:"recipe-list-container",children:[Object(o.jsxs)("div",{className:"top",children:[Object(o.jsx)("h1",{children:"Recipe List"}),Object(o.jsx)(x,{handleSearch:function(e){h(e.target.value)}})]}),Object(o.jsx)("ul",{children:s.slice(0,15).map((function(e){return Object(o.jsx)(u,{recipe:e},e.id)}))})]})},m=n(10),g=n(47),v=n(46),C=n(45),S=n(17);var y=function(e){var t=e.comment,n=e.handleDeleteComment,r=e.handleEditComment,s=Object(c.useState)(!1),i=Object(a.a)(s,2),j=i[0],u=i[1],l=Object(c.useState)(t.rating),b=Object(a.a)(l,2),h=b[0],O=b[1],d=Object(c.useState)(t.comment),f=Object(a.a)(d,2),x=f[0],p=f[1];function y(){u(!j)}return Object(c.useEffect)((function(){p(t.comment),O(t.rating)}),[t]),j?Object(o.jsxs)(v.a,{children:[Object(o.jsx)(g.a,{onClick:y,children:"Cancel Edit"}),Object(o.jsxs)(C.a,{onSubmit:function(e){r(e,t.id,x,h),y()},children:[Object(o.jsx)("input",{type:"text",value:x,onChange:function(e){return p(e.target.value)}}),Object(m.a)(Array(5)).map((function(e,t){return t+=1,Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"radio",name:"rating",value:t,onClick:function(){return O(t)}}),Object(o.jsx)(S.a,{className:"star",color:t<=h?"#ffc107":"",size:20})]})})),Object(o.jsx)(g.a,{type:"submit",children:"Submit Edit"})]}),Object(o.jsxs)(v.a,{children:[Object(o.jsx)("p",{children:x}),Object(o.jsxs)("p",{children:["from: ",t.user.username]}),Object(o.jsx)("div",{children:Object(m.a)(Array(5)).map((function(e,t){return Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"radio",name:"rating",value:t}),Object(o.jsx)(S.a,{color:t<h?"#ffc107":"",size:20})]})}))})]})]}):Object(o.jsxs)(v.a,{children:[function(){if(t.can_modify_comment)return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(g.a,{onClick:function(e){return n(e,t.id)},children:"Delete"}),Object(o.jsx)(g.a,{onClick:function(e){return y()},children:"Edit"})]})}(),Object(o.jsx)("p",{children:x}),Object(o.jsxs)("p",{children:["from: ",t.user.username]}),Object(o.jsx)("div",{children:Object(m.a)(Array(5)).map((function(e,t){return Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"radio",name:"rating",value:t}),Object(o.jsx)(S.a,{color:t<h?"#ffc107":"",size:20})]})}))})]})};var N=function(e){var t=e.handleAddComment,n=e.toggleCommentForm,r=Object(c.useState)(null),s=Object(a.a)(r,2),i=s[0],j=s[1],u=Object(c.useState)(null),l=Object(a.a)(u,2),b=l[0],h=l[1];return console.log(b),Object(o.jsx)(v.a,{children:Object(o.jsxs)(C.a,{onSubmit:function(e){return t(e,b,i)},children:[Object(o.jsx)("input",{type:"text",placeholder:"add comment here",onChange:function(e){return h(e.target.value)}}),Object(m.a)(Array(5)).map((function(e,t){return t+=1,Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"radio",name:"rating",value:t,onClick:function(){return j(t)}}),Object(o.jsx)(S.a,{className:"star",color:t<=i?"#ffc107":"",size:20})]})})),Object(o.jsx)(g.a,{type:"submit",children:"Submit Comment"}),Object(o.jsx)(g.a,{onClick:function(){return n()},children:"Cancel"})]})})};var k=function(e){var t=e.currentUser,n=e.handleDeleteRecipe,r=Object(c.useState)(""),s=Object(a.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)(0),b=Object(a.a)(l,2),h=b[0],O=b[1],d=Object(c.useState)([]),f=Object(a.a)(d,2),x=f[0],p=f[1],v=Object(j.g)().id;function C(){O(!h)}function S(e,t){e.preventDefault(),fetch("/api/comments/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&p(x.filter((function(e){return e.id!=t})))}))}function k(e,t,n,c){e.preventDefault(),fetch("/api/comments/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:n,rating:c})}).then((function(e){e.ok&&e.json().then((function(e){console.log(t),console.log(e);var n=x.filter((function(e){return e.id!=t}));p([e].concat(Object(m.a)(n)))}))}))}return Object(c.useEffect)((function(){fetch("/api/recipes/".concat(v)).then((function(e){return e.json()})).then((function(e){u(e),p(e.comments)}))}),[]),""!=i?Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:i.name}),Object(o.jsxs)("h3",{children:["By: ",i.user.username," "]}),Object(o.jsx)("h3",{children:"Ingredients"}),Object(o.jsx)("ul",{children:i.recipe_ingredients.map((function(e){return Object(o.jsx)("li",{children:e.quantity+" "+e.unit+" "+e.ingredient.name},e.id)}))}),Object(o.jsx)("h3",{children:"Cooking Instructions"}),Object(o.jsx)("p",{children:i.instructions}),i.can_modify_recipe?Object(o.jsx)(g.a,{onClick:function(e){return n(e,i.id)},children:"Delete Recipe"}):null,Object(o.jsx)("h3",{children:"Comments"}),""!=t?Object(o.jsx)("button",{type:"button",onClick:C,children:"Add Comment"}):"",1==h?Object(o.jsx)(N,{handleAddComment:function(e,t,n){e.preventDefault(),console.log(t),fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipe_id:i.id,comment:t,rating:n})}).then((function(e){e.ok?(e.json().then((function(e){return p([e].concat(Object(m.a)(x)))})),C()):e.json().then((function(e){return window.alert(e.comment)}))}))},toggleCommentForm:C}):null,Object(o.jsx)("ul",{children:x.map((function(e){return Object(o.jsx)(y,{currentUser:t,comment:e,handleDeleteComment:S,handleEditComment:k})}))})]}):Object(o.jsx)("p",{children:"loading..."})};n(40);var E=function(e){var t=e.users,n=Object(c.useState)(t),r=Object(a.a)(n,2),s=r[0],i=r[1],j=Object(c.useState)(""),u=Object(a.a)(j,2),b=u[0],h=u[1];return Object(c.useEffect)((function(){i(t)}),[t]),Object(c.useEffect)((function(){i(t.filter((function(e){return""===b?e:e.username.toLowerCase().includes(b)})))}),[b]),Object(o.jsxs)("div",{className:"chef-list-container",children:[Object(o.jsxs)("div",{className:"top",children:[Object(o.jsx)("h1",{children:"Chef List"}),Object(o.jsx)(x,{handleSearch:function(e){h(e.target.value)}})]}),Object(o.jsx)("ul",{children:s.slice(0,15).map((function(e){return Object(o.jsx)(l,{user:e},e.id)}))})]})};var L=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(j.g)().id;return Object(c.useEffect)((function(){fetch("/api/chefs/".concat(s)).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),console.log(n.recipes),""!=n?Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:n.username}),Object(o.jsx)("p",{children:n.bio}),Object(o.jsx)("ul",{children:void 0!=n.recipes?n.recipes.map((function(e){return Object(o.jsx)(u,{recipe:e})})):null})]}):Object(o.jsx)("p",{children:"loading"})};var U=function(e){var t=e.onLogin,n=Object(c.useState)(""),r=Object(a.a)(n,2),s=r[0],i=r[1],u=Object(c.useState)(""),l=Object(a.a)(u,2),h=l[0],O=l[1],d=Object(c.useState)(""),f=Object(a.a)(d,2),x=f[0],p=f[1],m=Object(c.useState)(""),v=Object(a.a)(m,2),S=v[0],y=v[1],N=Object(c.useState)(""),k=Object(a.a)(N,2),E=k[0],L=k[1],U=Object(c.useState)(""),w=Object(a.a)(U,2),D=w[0],T=w[1],_=Object(j.f)();return Object(o.jsx)(b.a,{children:Object(o.jsxs)(C.a,{className:"signup",onSubmit:function(e){e.preventDefault(),fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:S,password:E,first_name:s,last_name:h,email:x,password_confirmation:D})}).then((function(e){e.ok&&(e.json().then((function(e){return t(e)})),_("/"))}))},children:[Object(o.jsx)("h1",{children:"Sign Up!"}),Object(o.jsxs)(C.a.Group,{children:[Object(o.jsx)(C.a.Label,{children:"first name: "}),Object(o.jsx)(C.a.Control,{type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(o.jsx)(C.a.Label,{children:"last name: "}),Object(o.jsx)(C.a.Control,{type:"text",onChange:function(e){return O(e.target.value)}}),Object(o.jsx)(C.a.Label,{children:"email: "}),Object(o.jsx)(C.a.Control,{type:"email",onChange:function(e){return p(e.target.value)}}),Object(o.jsx)(C.a.Label,{children:"username: "}),Object(o.jsx)(C.a.Control,{type:"text",onChange:function(e){return y(e.target.value)}}),Object(o.jsx)(C.a.Label,{children:"password: "}),Object(o.jsx)(C.a.Control,{type:"password",onChange:function(e){return L(e.target.value)}}),Object(o.jsxs)(C.a.Group,{children:[Object(o.jsx)(C.a.Label,{children:"confirm password: "}),Object(o.jsx)(C.a.Control,{type:"password",onChange:function(e){return T(e.target.value)}})]}),Object(o.jsx)(g.a,{type:"signup",children:"sign up"})]})})};n(41);var w=function(e){var t=e.recipes,n=e.setRecipes,r=Object(c.useState)(""),s=Object(a.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)([]),b=Object(a.a)(l,2),h=b[0],O=b[1],d=Object(c.useState)(""),f=Object(a.a)(d,2),x=f[0],p=f[1],g=Object(j.f)(),v=Object(c.useState)(""),C=Object(a.a)(v,2),S=C[0],y=C[1],N=Object(c.useState)(""),k=Object(a.a)(N,2),E=k[0],L=k[1],U=Object(c.useState)(""),w=Object(a.a)(U,2),D=w[0],T=w[1];return console.log(S),Object(o.jsxs)("div",{className:"create-new-recipe",children:[Object(o.jsx)("h1",{children:"Create New Recipe"}),Object(o.jsxs)("div",{className:"input",children:[Object(o.jsx)("label",{children:"Name:"}),Object(o.jsx)("input",{type:"text",onChange:function(e){return u(e.target.value)}})]}),Object(o.jsx)("h2",{children:"Ingredients"}),Object(o.jsxs)("div",{className:"input",children:[Object(o.jsx)("label",{children:"Ingredient:"}),Object(o.jsx)("input",{type:"text",onChange:function(e){return y(e.target.value)}})]}),Object(o.jsxs)("div",{className:"input",children:[Object(o.jsx)("label",{children:"Quantity:"}),Object(o.jsx)("input",{type:"text",onChange:function(e){return L(e.target.value)}})]}),Object(o.jsxs)("div",{className:"input",children:[Object(o.jsx)("label",{children:"Unit:"}),Object(o.jsx)("input",{type:"text",onChange:function(e){return T(e.target.value)}})]}),Object(o.jsx)("button",{type:"submit",onClick:function(){return function(e,t,n){console.log(e);var c={ingredient:e,quantity:t,unit:n},r=[].concat(Object(m.a)(h),[c]);O(r)}(S,E,D)},children:"Add Ingredient"}),Object(o.jsx)("ul",{children:h.length>0&&h.map((function(e){return Object(o.jsxs)("li",{children:[e.quantity," ",e.unit," ",e.ingredient]},e.ingredient)}))}),Object(o.jsx)("h2",{children:"Instructions"}),Object(o.jsxs)("div",{className:"instruction-container",children:[Object(o.jsx)("label",{children:"Instructions: "}),Object(o.jsx)("textarea",{onChange:function(e){return p(e.target.value)}})]}),Object(o.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,recipe_ingredients:h,instructions:x})}).then((function(e){e.ok?e.json().then((function(e){n([].concat(Object(m.a)(t),[e])),g("/recipes/".concat(e.id))})):e.json().then((function(e){return window.alert(e.errors)}))}))},children:"Submit Recipe"})]})};var D=function(e){var t=e.currentUser,n=e.setCurrentUser,c=(e.users,e.setUsers),r=Object(j.f)();return Object(o.jsxs)(b.a,{children:[Object(o.jsxs)("h1",{children:["Welcome ",t.first_name]}),Object(o.jsx)(g.a,{onClick:function(){fetch("/api/users/".concat(t.id),{method:"DELETE"}).then((function(e){e.ok&&(n(""),e.json().then((function(e){return c(e)})),r("/"))}))},children:"Delete Account"})]})};n(42);var T=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),i=Object(a.a)(s,2),u=i[0],l=i[1],b=Object(c.useState)(""),x=Object(a.a)(b,2),m=x[0],g=x[1],v=Object(j.f)();return Object(c.useEffect)((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){return r(e)})).then((function(){return fetch("/api/recipes")})).then((function(e){return e.json()})).then((function(e){return l(e)}))}),[]),Object(c.useEffect)((function(){fetch("/api/auth").then((function(e){e.ok&&e.json().then((function(e){return g(e)}))}))}),[]),Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(d,{currentUser:m,setCurrentUser:g}),Object(o.jsx)(O,{currentUser:m}),Object(o.jsx)("div",{className:"app-container",children:Object(o.jsxs)(j.c,{children:[Object(o.jsx)(j.a,{path:"/",element:Object(o.jsx)(h,{currentUser:m,recipes:u,users:n})}),Object(o.jsx)(j.a,{path:"/recipes",element:Object(o.jsx)(p,{recipes:u})}),Object(o.jsx)(j.a,{path:"/recipes/:id",element:Object(o.jsx)(k,{currentUser:m,handleDeleteRecipe:function(e,t){e.preventDefault(),fetch("/api/recipes/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&(l(u.filter((function(e){return e.id!==t}))),v("/recipes"))}))}})}),Object(o.jsx)(j.a,{path:"/chefs",element:Object(o.jsx)(E,{users:n})}),Object(o.jsx)(j.a,{path:"/chefs/:id",element:Object(o.jsx)(L,{})}),Object(o.jsx)(j.a,{path:"/login",element:Object(o.jsx)(f,{onLogin:g})}),Object(o.jsx)(j.a,{path:"/signup",element:Object(o.jsx)(U,{onLogin:g})}),Object(o.jsx)(j.a,{path:"/recipes/create",element:Object(o.jsx)(w,{recipes:u,setRecipes:l})}),Object(o.jsx)(j.a,{path:"/account",element:Object(o.jsx)(D,{currentUser:m,setCurrentUser:g,users:n,setUsers:r})})]})})]})};s.a.render(Object(o.jsx)(i.a,{children:Object(o.jsx)(T,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.73647342.chunk.js.map
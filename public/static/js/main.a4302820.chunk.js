(this["webpackJsonpthe-social-chef"]=this["webpackJsonpthe-social-chef"]||[]).push([[0],{38:function(e,t,n){},48:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(20),i=n.n(r),s=n(9),j=(n(48),n(5)),a=n(7),o=(n(38),n(64)),u=n(1);var l=function(e){var t=e.recipe;return void 0!=t?Object(u.jsx)(o.a,{children:Object(u.jsx)(s.b,{to:"/recipes/".concat(t.id),children:Object(u.jsx)(o.a.Title,{children:t.name})})}):null};var b=function(e){var t=e.user;return void 0!=t?Object(u.jsx)(o.a,{children:Object(u.jsx)(s.b,{to:"/chefs/".concat(t.id),children:t.username})}):null},h=n(58);var O=function(e){var t=e.currentUser,n=e.recipes,r=e.users,i=Object(c.useState)([]),s=Object(j.a)(i,2),a=s[0],o=s[1],O=Object(c.useState)(""),d=Object(j.a)(O,2),x=d[0],f=d[1],p=Object(c.useState)(""),m=Object(j.a)(p,2),g=m[0],v=m[1];return console.log(n),Object(c.useEffect)((function(){return o(n.filter((function(e){return e.user.id==t.id})))}),[t,n]),Object(c.useEffect)((function(){for(var e=[],t=0;t<4;t++)e.push(n[Math.floor(Math.random()*n.length)]);f(e);for(var c=[],i=0;i<4;i++)c.push(r[Math.floor(Math.random()*r.length)]);v(c)}),[n,r]),""!=t?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"The Social Chef!"}),Object(u.jsx)("h3",{children:"My Recipes"}),Object(u.jsx)("ul",{children:a.map((function(e){return Object(u.jsx)(l,{recipe:e})}))})]}):Object(u.jsxs)(h.a,{children:[Object(u.jsxs)(h.a,{children:[Object(u.jsx)("h1",{children:"The Social Chef!"}),Object(u.jsx)("h3",{children:"Start sharing and exploring recipes by signing up or logging in!"})]}),Object(u.jsxs)(h.a,{children:[Object(u.jsx)("h2",{children:"Check out these recipes!"}),Object(u.jsx)("ul",{children:""!=x?x.map((function(e){return Object(u.jsx)(l,{recipe:e})})):null}),Object(u.jsx)("h2",{children:"Some of the Chefs!"}),Object(u.jsx)("ul",{children:""!=g?g.map((function(e){return Object(u.jsx)(b,{user:e})})):null})]})]})},d=n(61),x=n(62);var f=function(e){return""!=e.currentUser?Object(u.jsx)("div",{children:Object(u.jsx)(d.a,{className:"sidenav",children:Object(u.jsx)(x.a,{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(s.c,{className:"sidenavLink",to:"/",children:"Home"}),Object(u.jsx)(s.c,{className:"sidenavLink",to:"/recipes",exact:"true",children:"Recipes"}),Object(u.jsx)(s.c,{className:"sidenavLink",to:"/chefs",exact:"true",children:"Chefs"}),Object(u.jsx)(s.c,{className:"sidenavLink",to:"/recipes/create",exact:"true",children:"Share Recipe"})]})})})}):Object(u.jsx)("div",{children:Object(u.jsx)(d.a,{className:"sidenav",children:Object(u.jsx)(x.a,{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(s.c,{className:"sidenavLink",to:"/",children:"Home"}),Object(u.jsx)(s.c,{className:"sidenavLink",to:"/recipes",exact:"true",children:"Recipes"}),Object(u.jsx)(s.c,{className:"sidenavLink",to:"/chefs",exact:"true",children:"Chefs"})]})})})})};var p=function(e){var t=e.currentUser,n=e.setCurrentUser,c=Object(a.f)();return""!==t?Object(u.jsx)(d.a,{children:Object(u.jsxs)(h.a,{children:[Object(u.jsxs)("h3",{style:{float:"left"},children:["Welcome ",t.username]}),Object(u.jsx)("div",{style:{float:"right"},"data-initials":t.first_name[0]+t.last_name[0]}),Object(u.jsx)(x.a.Link,{style:{float:"right"},onClick:function(e){e.preventDefault(),fetch("/api/logout",{method:"DELETE"}).then(n("")).then(c("/"))},children:"Logout"}),Object(u.jsx)(s.c,{to:"/account",style:{textDecoration:"none"},children:"Account"})]})}):Object(u.jsxs)("div",{children:[Object(u.jsx)(s.c,{to:"/login",children:"Login"}),Object(u.jsx)(s.c,{to:"/signup",children:"Sign Up"})]})};var m=function(e){var t=e.onLogin,n=Object(c.useState)(""),r=Object(j.a)(n,2),i=r[0],s=r[1],o=Object(c.useState)(""),l=Object(j.a)(o,2),b=l[0],h=l[1],O=Object(a.f)();return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Login"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:b})}).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),O("/")):e.json().then((function(e){return alert(e.errors)}))}))},children:[Object(u.jsx)("label",{children:"username: "}),Object(u.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("label",{children:"password: "}),Object(u.jsx)("input",{type:"password",onChange:function(e){return h(e.target.value)}}),Object(u.jsx)("button",{children:"login"})]})]})};var g=function(e){var t=e.recipes;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Recipe List"}),Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)(l,{recipe:e},e.id)}))})]})},v=n(14),C=n(59),y=n(63),S=n(27);var k=function(e){var t=e.comment,n=e.handleDeleteComment,r=e.handleEditComment,i=Object(c.useState)(!1),s=Object(j.a)(i,2),a=s[0],l=s[1],b=Object(c.useState)(t.rating),h=Object(j.a)(b,2),O=h[0],d=h[1],x=Object(c.useState)(t.comment),f=Object(j.a)(x,2),p=f[0],m=f[1];function g(){l(!a)}return Object(c.useEffect)((function(){m(t.comment),d(t.rating)}),[t]),a?Object(u.jsxs)(o.a,{children:[Object(u.jsx)(C.a,{onClick:g,children:"Cancel Edit"}),Object(u.jsxs)(y.a,{onSubmit:function(e){r(e,t.id,p,O),g()},children:[Object(u.jsx)("input",{type:"text",value:p,onChange:function(e){return m(e.target.value)}}),Object(v.a)(Array(5)).map((function(e,t){return t+=1,Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"radio",name:"rating",value:t,onClick:function(){return d(t)}}),Object(u.jsx)(S.a,{className:"star",color:t<=O?"#ffc107":"",size:20})]})})),Object(u.jsx)(C.a,{type:"submit",children:"Submit Edit"})]}),Object(u.jsxs)(o.a,{children:[Object(u.jsx)("p",{children:p}),Object(u.jsxs)("p",{children:["from: ",t.user.username]}),Object(u.jsx)("div",{children:Object(v.a)(Array(5)).map((function(e,t){return Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"radio",name:"rating",value:t}),Object(u.jsx)(S.a,{color:t<O?"#ffc107":"",size:20})]})}))})]})]}):Object(u.jsxs)(o.a,{children:[function(){if(t.can_modify_comment)return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(C.a,{onClick:function(e){return n(e,t.id)},children:"Delete"}),Object(u.jsx)(C.a,{onClick:function(e){return g()},children:"Edit"})]})}(),Object(u.jsx)("p",{children:p}),Object(u.jsxs)("p",{children:["from: ",t.user.username]}),Object(u.jsx)("div",{children:Object(v.a)(Array(5)).map((function(e,t){return Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"radio",name:"rating",value:t}),Object(u.jsx)(S.a,{color:t<O?"#ffc107":"",size:20})]})}))})]})};var L=function(e){var t=e.handleAddComment,n=e.toggleCommentForm,r=Object(c.useState)(null),i=Object(j.a)(r,2),s=i[0],a=i[1],l=Object(c.useState)(null),b=Object(j.a)(l,2),h=b[0],O=b[1];return console.log(h),Object(u.jsx)(o.a,{children:Object(u.jsxs)(y.a,{onSubmit:function(e){return t(e,h,s)},children:[Object(u.jsx)("input",{type:"text",placeholder:"add comment here",onChange:function(e){return O(e.target.value)}}),Object(v.a)(Array(5)).map((function(e,t){return t+=1,Object(u.jsxs)("label",{children:[Object(u.jsx)("input",{type:"radio",name:"rating",value:t,onClick:function(){return a(t)}}),Object(u.jsx)(S.a,{className:"star",color:t<=s?"#ffc107":"",size:20})]})})),Object(u.jsx)(C.a,{type:"submit",children:"Submit Comment"}),Object(u.jsx)(C.a,{onClick:function(){return n()},children:"Cancel"})]})})};var E=function(e){var t=e.currentUser,n=e.handleDeleteRecipe,r=Object(c.useState)(""),i=Object(j.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)(0),b=Object(j.a)(l,2),h=b[0],O=b[1],d=Object(c.useState)([]),x=Object(j.a)(d,2),f=x[0],p=x[1],m=Object(a.g)().id;function g(){O(!h)}function y(e,t){e.preventDefault(),fetch("/api/comments/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&p(f.filter((function(e){return e.id!=t})))}))}function S(e,t,n,c){e.preventDefault(),fetch("/api/comments/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:n,rating:c})}).then((function(e){e.ok&&e.json().then((function(e){console.log(t),console.log(e);var n=f.filter((function(e){return e.id!=t}));p([e].concat(Object(v.a)(n)))}))}))}return Object(c.useEffect)((function(){fetch("/api/recipes/".concat(m)).then((function(e){return e.json()})).then((function(e){o(e),p(e.comments)}))}),[]),""!=s?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:s.name}),Object(u.jsxs)("h3",{children:["By: ",s.user.username," "]}),Object(u.jsx)("h3",{children:"Ingredients"}),Object(u.jsx)("ul",{children:s.recipe_ingredients.map((function(e){return Object(u.jsx)("li",{children:e.quantity+" "+e.unit+" "+e.ingredient.name},e.id)}))}),Object(u.jsx)("h3",{children:"Cooking Instructions"}),Object(u.jsx)("p",{children:s.instructions}),s.can_modify_recipe?Object(u.jsx)(C.a,{onClick:function(e){return n(e,s.id)},children:"Delete Recipe"}):null,Object(u.jsx)("h3",{children:"Comments"}),""!=t?Object(u.jsx)("button",{type:"button",onClick:g,children:"Add Comment"}):"",1==h?Object(u.jsx)(L,{handleAddComment:function(e,t,n){e.preventDefault(),console.log(t),fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipe_id:s.id,comment:t,rating:n})}).then((function(e){e.ok?(e.json().then((function(e){return p([e].concat(Object(v.a)(f)))})),g()):e.json().then((function(e){return window.alert(e.comment)}))}))},toggleCommentForm:g}):null,Object(u.jsx)("ul",{children:f.map((function(e){return Object(u.jsx)(k,{currentUser:t,comment:e,handleDeleteComment:y,handleEditComment:S})}))})]}):Object(u.jsx)("p",{children:"loading..."})};var D=function(e){var t=e.users;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Chef List"}),Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)(b,{user:e},e.id)}))})]})};var N=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(a.g)().id;return Object(c.useEffect)((function(){fetch("/api/chefs/".concat(i)).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),console.log(n.recipes),""!=n?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:n.username}),Object(u.jsx)("p",{children:n.bio}),Object(u.jsx)("ul",{children:void 0!=n.recipes?n.recipes.map((function(e){return Object(u.jsx)(l,{recipe:e})})):null})]}):Object(u.jsx)("p",{children:"loading"})};var U=function(e){var t=e.onLogin,n=Object(c.useState)(""),r=Object(j.a)(n,2),i=r[0],s=r[1],o=Object(c.useState)(""),l=Object(j.a)(o,2),b=l[0],O=l[1],d=Object(c.useState)(""),x=Object(j.a)(d,2),f=x[0],p=x[1],m=Object(c.useState)(""),g=Object(j.a)(m,2),v=g[0],S=g[1],k=Object(c.useState)(""),L=Object(j.a)(k,2),E=L[0],D=L[1],N=Object(c.useState)(""),U=Object(j.a)(N,2),T=U[0],w=U[1],_=Object(a.f)();return Object(u.jsx)(h.a,{children:Object(u.jsxs)(y.a,{className:"signup",onSubmit:function(e){e.preventDefault(),fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,password:E,first_name:i,last_name:b,email:f,password_confirmation:T})}).then((function(e){e.ok&&(e.json().then((function(e){return t(e)})),_("/"))}))},children:[Object(u.jsx)("h1",{children:"Sign Up!"}),Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"first name: "}),Object(u.jsx)(y.a.Control,{type:"text",onChange:function(e){return s(e.target.value)}})]}),Object(u.jsx)(y.a.Label,{children:"last name: "}),Object(u.jsx)(y.a.Control,{type:"text",onChange:function(e){return O(e.target.value)}}),Object(u.jsx)(y.a.Label,{children:"email: "}),Object(u.jsx)(y.a.Control,{type:"email",onChange:function(e){return p(e.target.value)}}),Object(u.jsx)(y.a.Label,{children:"username: "}),Object(u.jsx)(y.a.Control,{type:"text",onChange:function(e){return S(e.target.value)}}),Object(u.jsx)(y.a.Label,{children:"password: "}),Object(u.jsx)(y.a.Control,{type:"password",onChange:function(e){return D(e.target.value)}}),Object(u.jsxs)(y.a.Group,{children:[Object(u.jsx)(y.a.Label,{children:"confirm password: "}),Object(u.jsx)(y.a.Control,{type:"password",onChange:function(e){return w(e.target.value)}})]}),Object(u.jsx)(C.a,{type:"signup",children:"sign up"})]})})};var T=function(e){var t=e.addIngredient,n=Object(c.useState)(""),r=Object(j.a)(n,2),i=r[0],s=r[1],a=Object(c.useState)(""),o=Object(j.a)(a,2),l=o[0],b=o[1],h=Object(c.useState)(""),O=Object(j.a)(h,2),d=O[0],x=O[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Ingredient: "}),Object(u.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("label",{children:"Quantity:"}),Object(u.jsx)("input",{type:"text",onChange:function(e){return b(e.target.value)}}),Object(u.jsx)("label",{children:"Unit:"}),Object(u.jsx)("input",{type:"text",onChange:function(e){return x(e.target.value)}}),Object(u.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),t(i,l,d)},children:"Add Ingredient"})]})};var w=function(e){var t=e.recipes,n=e.setRecipes,r=Object(c.useState)(""),i=Object(j.a)(r,2),s=i[0],l=i[1],b=Object(c.useState)([]),O=Object(j.a)(b,2),d=O[0],x=O[1],f=Object(c.useState)(""),p=Object(j.a)(f,2),m=p[0],g=p[1],C=Object(a.f)();return console.log(d),Object(u.jsxs)(h.a,{children:[Object(u.jsxs)(o.a,{children:[Object(u.jsx)("h1",{children:"Create New Recipe"}),Object(u.jsxs)(y.a,{children:[Object(u.jsx)("label",{children:"Recipe Name"}),Object(u.jsx)("input",{type:"text",onChange:function(e){return l(e.target.value)}})]})]}),Object(u.jsx)(o.a,{children:Object(u.jsxs)(y.a,{children:[Object(u.jsx)("h2",{children:"Ingredients"}),Object(u.jsx)(T,{addIngredient:function(e,t,n){var c={ingredient:e,quantity:t,unit:n},r=[].concat(Object(v.a)(d),[c]);x(r)}}),Object(u.jsx)("ul",{children:d.length>0&&d.map((function(e){return Object(u.jsxs)("li",{children:[e.ingredient," ",e.quantity," ",e.unit]},e.ingredient)}))})]})}),Object(u.jsx)(o.a,{children:Object(u.jsxs)(y.a,{children:[Object(u.jsx)("h2",{children:"Instructions"}),Object(u.jsx)("label",{children:"Cooking Instructions: "}),Object(u.jsx)("textarea",{type:"paragraph_text",cols:"80",onChange:function(e){return g(e.target.value)}})]})}),Object(u.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,recipe_ingredients:d,instructions:m})}).then((function(e){e.ok?e.json().then((function(e){n([].concat(Object(v.a)(t),[e])),C("/recipes/".concat(e.id))})):e.json().then((function(e){return window.alert(e.errors)}))}))},children:"Submit Recipe"})]})};var _=function(e){var t=e.currentUser,n=e.setCurrentUser,c=(e.users,e.setUsers),r=Object(a.f)();return Object(u.jsxs)(h.a,{children:[Object(u.jsxs)("h1",{children:["Welcome ",t.first_name]}),Object(u.jsx)(C.a,{onClick:function(){fetch("/api/users/".concat(t.id),{method:"DELETE"}).then((function(e){e.ok&&(n(""),e.json().then((function(e){return c(e)})),r("/"))}))},children:"Delete Account"})]})},R=(n(55),n(60)),A=n(42);var I=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),s=Object(j.a)(i,2),o=s[0],l=s[1],b=Object(c.useState)(""),d=Object(j.a)(b,2),x=d[0],v=d[1],C=Object(a.f)();return Object(c.useEffect)((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){return r(e)})).then((function(){return fetch("/api/recipes")})).then((function(e){return e.json()})).then((function(e){return l(e)}))}),[]),Object(c.useEffect)((function(){fetch("/api/auth").then((function(e){e.ok&&e.json().then((function(e){return v(e)}))}))}),[]),Object(u.jsxs)("div",{className:"main",children:[Object(u.jsx)(h.a,{children:Object(u.jsx)(R.a,{children:Object(u.jsx)(p,{currentUser:x,setCurrentUser:v})})}),Object(u.jsx)(h.a,{margin:"10px",children:Object(u.jsxs)(R.a,{children:[Object(u.jsx)(A.a,{lg:3,children:Object(u.jsx)(f,{currentUser:x})}),Object(u.jsx)(A.a,{lg:!0,children:Object(u.jsxs)(a.c,{children:[Object(u.jsx)(a.a,{path:"/",element:Object(u.jsx)(O,{currentUser:x,recipes:o,users:n})}),Object(u.jsx)(a.a,{path:"/recipes",element:Object(u.jsx)(g,{recipes:o})}),Object(u.jsx)(a.a,{path:"/recipes/:id",element:Object(u.jsx)(E,{currentUser:x,handleDeleteRecipe:function(e,t){e.preventDefault(),fetch("/api/recipes/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&(l(o.filter((function(e){return e.id!=t}))),C("/recipes"))}))}})}),Object(u.jsx)(a.a,{path:"/chefs",element:Object(u.jsx)(D,{users:n})}),Object(u.jsx)(a.a,{path:"/chefs/:id",element:Object(u.jsx)(N,{})}),Object(u.jsx)(a.a,{path:"/login",element:Object(u.jsx)(m,{onLogin:v})}),Object(u.jsx)(a.a,{path:"/signup",element:Object(u.jsx)(U,{onLogin:v})}),Object(u.jsx)(a.a,{path:"/recipes/create",element:Object(u.jsx)(w,{recipes:o,setRecipes:l})}),Object(u.jsx)(a.a,{path:"/account",element:Object(u.jsx)(_,{currentUser:x,setCurrentUser:v,users:n,setUsers:r})})]})})]})})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};i.a.render(Object(u.jsx)(s.a,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),F()}},[[56,1,2]]]);
//# sourceMappingURL=main.a4302820.chunk.js.map